!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),s=r(a),c=function(){function e(){var t=this;o(this,e),console.log("I am working!"),this.drop=new s["default"],this.drop.init(),window.addEventListener("load",function(){t.doStuff()})}return i(e,[{key:"doStuff",value:function(){this.drop.createDropzone("dropzone")}}]),e}();t["default"]=new c},function(e,t,n){"use strict";function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(){}var i="function"!=typeof Object.create?"~":!1;o.prototype._events=void 0,o.prototype.listeners=function(e,t){var n=i?i+e:e,r=this._events&&this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var o=0,a=r.length,s=new Array(a);a>o;o++)s[o]=r[o].fn;return s},o.prototype.emit=function(e,t,n,r,o,a){var s=i?i+e:e;if(!this._events||!this._events[s])return!1;var c,l,u=this._events[s],f=arguments.length;if("function"==typeof u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),f){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,r),!0;case 5:return u.fn.call(u.context,t,n,r,o),!0;case 6:return u.fn.call(u.context,t,n,r,o,a),!0}for(l=1,c=new Array(f-1);f>l;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var d,h=u.length;for(l=0;h>l;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),f){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,n);break;default:if(!c)for(d=1,c=new Array(f-1);f>d;d++)c[d-1]=arguments[d];u[l].fn.apply(u[l].context,c)}}return!0},o.prototype.on=function(e,t,n){var o=new r(t,n||this),a=i?i+e:e;return this._events||(this._events=i?{}:Object.create(null)),this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],o]:this._events[a].push(o):this._events[a]=o,this},o.prototype.once=function(e,t,n){var o=new r(t,n||this,!0),a=i?i+e:e;return this._events||(this._events=i?{}:Object.create(null)),this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],o]:this._events[a].push(o):this._events[a]=o,this},o.prototype.removeListener=function(e,t,n,r){var o=i?i+e:e;if(!this._events||!this._events[o])return this;var a=this._events[o],s=[];if(t)if(a.fn)(a.fn!==t||r&&!a.once||n&&a.context!==n)&&s.push(a);else for(var c=0,l=a.length;l>c;c++)(a[c].fn!==t||r&&!a[c].once||n&&a[c].context!==n)&&s.push(a[c]);return s.length?this._events[o]=1===s.length?s[0]:s:delete this._events[o],this},o.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[i?i+e:e]:this._events=i?{}:Object.create(null),this):this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=i,e.exports=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),c=r(s),l=function(){function e(){o(this,e),console.log("base init"),this.ee=new c["default"],this.tick=null}return a(e,[{key:"setState",value:function(e,t){var n=this;console.log("base setState"),this.state[e]=t,this.state=i({},this.state),null!=this.tick&&clearTimeout(this.tick),this.tick=setTimeout(function(){n.ee.emit("statechange",{})})}}]),e}();t["default"]=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var c=n(1),l=r(c),u=n(2),f=r(u),d=function(e){function t(){o(this,t);var e=i(this,Object.getPrototypeOf(t).call(this));return console.log("drop init"),e.ee=new l["default"],e.tick=null,e.ee.on("newevent",function(){console.log("new event")}),e.ee.on("statechange",function(){console.log("state change");var t=e.state.dropzone;t.style.background=e.state.background,e.state.border?t.style.border=e.state.border:t.style.border="",document.title=e.state.title}),e.state={defaultColor:"#00F"},e}return a(t,e),s(t,[{key:"init",value:function(){}},{key:"createDropzone",value:function(){var e=this,t=document.createElement("div");this.state.dropzone=t,t.style.backgroundColor=this.state.defaultColor,t.style.width="200px",t.style.height="200px",t.draggable=!0,document.body.appendChild(t),t.addEventListener("dragenter",function(t){e.doNothing(t),console.log("enter"),e.setState("background","#030"),e.setState("border","solid 2px #FFF")},!1),t.addEventListener("dragleave",function(t){e.doNothing(t),console.log("drag leave"),e.setState("background",e.state.defaultColor),e.setState("border",null)}),t.addEventListener("dragover",function(t){e.doNothing(t)},!1),t.ondrop=function(t){e.doNothing(t),console.log(t),e.setState("background","#0F0");var n=t.dataTransfer.files,r=t.dataTransfer.files[0];null!=r.webkitGetAsEntry,console.log("items ",t.dataTransfer.items),e.readTextFile(n[0]);for(var o=0,i=void 0;i=n[o];o++);}}},{key:"doNothing",value:function(e){e.stopPropogation&&e.stopPropogation(),e.preventDefault()}},{key:"readTextFile",value:function(e){var t=this;console.log("reading file ",e);var n=new FileReader;n.onloadend=function(e){console.log("done ",e),t.setState("background",t.state.defaultColor),e.target.readyState==FileReader.DONE&&!function(){var e=n.result,r=new Uint8Array(n.result),o=new Blob([e],{type:"image/png"});console.log(r.length);var i=t.createImage(o);i.addEventListener("click",function(e){i.remove()})}()},n.readAsArrayBuffer(e)}},{key:"createImage",value:function(e){var t=document.createElement("div");t.classList.add("outer");var n=document.createElement("div");n.classList.add("box");var r=document.createTextNode("This is a test");n.appendChild(r),t.appendChild(n);var o=document.createElement("span");o.classList.add("container"),t.appendChild(o);var i=document.createElement("img"),a=window.URL||window.webkitURL,s=a.createObjectURL(e);return i.src=s,o.appendChild(i),document.body.appendChild(t),i.onload=function(e){var n=i.width,r=i.height;i.style.border="solid 1px #000",t.style.width=n+"px",t.style.height=r+"px"},n}}]),t}(f["default"]);t["default"]=d}]);